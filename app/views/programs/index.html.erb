<h1 class="programsTitle">Programs</h1>
<section class="program-grid">
  <% @programs.each do |program| %>
    <article id="<%= program.name.parameterize %>" class="program-card">
      <% program_image = fetch_image_by_title("program_image_#{program.name.parameterize}") %>
      <%= image_tag(program_image.image_data.url, alt: program.name) if program_image %>
      <% if program.name == "Al-Mustaqbal Academy" %>
        <%= image_tag "al_mustaqbal_academy.jpg", alt: "Al-Mustaqbal Academy" %>
      <% elsif program.name == "Summer Camp" %>
        <%= image_tag "poh.jpg", alt: "Summer Camp" %>
      <% end %>
      <h3><%= program.name %></h3>
      <p>Age Group: <%= program.age_group %></p>
      <p><%= truncate(program.description, length: 100) %></p>
      <div class="button-container">
        <%= link_to "Learn More", program_path(program), class: "btn btn-primary" %>
        <% if user_signed_in? %>
          <%= link_to "Register", enrollments_path(program_id: program.id), class: "btn btn-primary" %>
        <% else %>
          <%= link_to "Register", new_user_session_path, class: "btn btn-primary", data: { turbolinks: false } %>
        <% end %>
      </div>
    </article>
  <% end %>
</section>
